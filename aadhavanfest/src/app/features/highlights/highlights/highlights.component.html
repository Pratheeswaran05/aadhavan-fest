<div class="p-2">
  <!-- Tabs -->
  <div class="flex justify-center mb-6">
    <button 
      (click)="selectTab('inside')" 
      [ngClass]="selectedTab === 'inside' ? 'bg-blue-500 text-white' : 'bg-gray-300 text-black'"
      class="px-4 py-2 mx-2 rounded-lg">
      Inside College
    </button>
    <button 
      (click)="selectTab('outside')" 
      [ngClass]="selectedTab === 'outside' ? 'bg-blue-500 text-white' : 'bg-gray-300 text-black'"
      class="px-4 py-2 mx-2 rounded-lg">
      Outside College
    </button>
  </div>

  <!-- Video Layout -->
  <ng-container *ngIf="selectedTab === 'inside' || selectedTab === 'outside'">
    <div class="flex flex-col sm:grid sm:grid-cols-2 lg:grid-cols-3 gap-6 p-4 sm:p-6 overflow-x-hidden">
      <div 
        *ngFor="let video of selectedTab === 'inside' ? videosInside : videosOutside" 
        class="relative rounded-2xl overflow-hidden shadow-md bg-white group sm:h-64 h-[90vh] w-full"
      >

        <!-- Thumbnail -->
        <img
          [src]="video.thumbnail_url"
          alt="Video thumbnail"
          class="absolute w-full h-full object-cover transition-opacity duration-300 group-hover:opacity-0 sm:block hidden"
        />

        <!-- Desktop video (hover to play/unmute) -->
        <video
          #videoRef
          class="absolute w-full h-full object-cover opacity-0 group-hover:opacity-100 transition-opacity duration-300 sm:block hidden"
          loop
          muted
          playsinline
          preload="metadata"
          (mouseenter)="playAndUnmute(videoRef)"
          (mouseleave)="pauseAndMute(videoRef)"
        >
          <source [src]="'http://localhost:5000/' + video.video_url" type="video/mp4" />
        </video>

        <!-- Mobile video (auto play muted) -->
        <video
          class="block sm:hidden w-full h-full object-cover pointer-events-none"
          autoplay
          muted
          loop
          playsinline
          preload="metadata"
        >
          <source [src]="'http://localhost:5000/' + video.video_url" type="video/mp4" />
        </video>

        <!-- Top Icons -->
        <div class="absolute top-0 left-0 right-0 z-10 flex justify-between items-start p-3">
          <!-- Duration -->
          <div class="bg-black/60 text-white text-xs px-2 py-1 rounded-md">
            {{ video.duration }}
          </div>
        </div>

        <!-- Bottom Text -->
        <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/60 to-transparent p-4 z-10">
          <h3 class="text-white font-semibold text-lg">{{ video.title }}</h3>
          <p class="text-gray-300 text-sm mt-1">{{ video.description }}</p>
        </div>
      </div>
    </div>
  </ng-container>
</div>
